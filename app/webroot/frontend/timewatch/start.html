<div class="row" ng-controller="TimewatchStartCtrl">
	<div class="col-lg-12">
		<div class="form-title">Track time spent on completing tasks</div>
	</div>
	<div class="col-lg-12" ng-show="alerts.length">
		<alert ng-repeat="alert in alerts" type="{{alert.type}}" close="closeAlert($index)">{{alert.msg}}</alert>
	</div>

	<div>
	<form method="POST" role="form">
		<div class="row">
			<div class="col-xs-8">
				<div class="form-group">
					<label for="inputTitle">Select Goal</label>
					<select class="form-control" id="inputGoal" placeholder="Select Goal" ng-model="formdata.Goal">
						<option ng-repeat="goal in goals" value="{{ goal.Goal.id }}">{{ goal.Goal.title }}</option>
					</select>
				</div>
			</div>
		</div>

		<div class="row">
			<div class="col-xs-8">
				<div class="form-group">
					<label for="inputTitle">Select Task</label>
					<select class="form-control" id="inputTask" placeholder="Select Task" ng-model="formdata.Task" ng-disabled="!formdata.Goal">
						<option ng-repeat="task in tasks" value="{{ task.id }}">{{ task.title }}</option>
					</select>
				</div>
			</div>
		</div>

		<div class="row">
			<div class="col-xs-8">
				<div>
					<button class="btn btn-success btn-lg" ng-click="startTimer(formdata.Task)">START TIMER</button>
				</div>
				<div>
					<br />
					<a href="" class="small-text">Manually add start and end time</a>
				</div>
			</div>
		</div>
	</form>
	</div>

	<div class="widget">
		<div class="widget-header">
			<i class="fa fa-clock-o"></i> Recent timewatches
			<div class="clearfix"></div>
		</div>
		<div ng-hide="timewatches.length">
			<span class="small-margin"></span>None
		</div>
		<div class="table-responsive" ng-show="timewatches.length">
			<table class="table">
				<thead>
					<tr>
						<th>#</th>
						<th>Task</th>
						<th>Start time</th>
						<th>End time</th>
						<th></th>
						<th>Actions</th>
					</tr>
				</thead>
				<tbody>
					<tr ng-repeat="timewatch in timewatches">
						<td>{{$index + 1}}</td>
						<td>{{timewatch.Task.title}}</td>
						<td>{{timewatch.Timewatch.start_time}}</td>
						<td>
							<span ng-show="timewatch.Timewatch.is_active">Active</span>
							<span ng-hide="timewatch.Timewatch.is_active">{{timewatch.Timewatch.end_time}}</span>
						</td>
						<td>
							<span ng-show="timewatch.Timewatch.is_active"><a href='#/timewatch/stop/{{timewatch.Timewatch.id}}' ng-click="clearAlerts()">Stop</a></span>
						</td>
						<td>
							<span class="small-margin"></span>
							<a href='#/timewatch/edit/{{timewatch.Timewatch.id}}' ng-click="clearAlerts()"><span class="glyphicon glyphicon-pencil"></span></a>
							<span class="small-margin"></span>
							<a href='#/timewatch' ng-click="deleteTimewatch(timewatch.Timewatch.id)"><span class="glyphicon glyphicon-trash"></span></a>
						</td>
					</tr>
				</tbody>
			</table>
		</div>
	</div>
</div>
